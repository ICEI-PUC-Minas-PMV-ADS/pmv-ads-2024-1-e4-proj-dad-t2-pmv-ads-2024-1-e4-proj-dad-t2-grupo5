 <div
    class="modal fade"
    id="solicitarExameModal"
    tabindex="-1"
    role="dialog"
    aria-labelledby="modal-solicitarExame-label"
    aria-hidden="true"
    >
        <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modal-solicitarExame-label">
                    Solicitar Novo Exame
                    </h5>
                    <button
                    type="button"
                    class="close"
                    data-dismiss="modal"
                    aria-label="Fechar"
                    >
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="formSolicitarExame">
                    <div class="form-group">
                        <label>Selecione os exames:</label>
                        <div class="form-check">
                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="hemogramaCompleto"
                            name="hemogramaCompleto"
                        />
                        <label class="form-check-label" for="hemogramaCompleto"
                            >Hemograma Completo</label
                        ><br />

                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="glicoseJejum"
                            name="glicoseJejum"
                        />
                        <label class="form-check-label" for="glicoseJejum"
                            >Glicose Jejum</label
                        ><br />

                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="ttog"
                            name="ttog"
                        />
                        <label class="form-check-label" for="ttog">TTOG</label><br />

                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="hbac"
                            name="hbac"
                        />
                        <label class="form-check-label" for="hbac">Hbac</label><br />

                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="frutosamina"
                            name="frutosamina"
                        />
                        <label class="form-check-label" for="frutosamina"
                            >Frutosamina</label
                        ><br />

                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="insulina"
                            name="insulina"
                        />
                        <label class="form-check-label" for="insulina">Insulina</label
                        ><br />

                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="ureia"
                            name="ureia"
                        />
                        <label class="form-check-label" for="ureia">Ureia</label><br />

                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="creatinina"
                            name="creatinina"
                        />
                        <label class="form-check-label" for="creatinina">Creatinina</label
                        ><br />

                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="acidoUrico"
                            name="acidoUrico"
                        />
                        <label class="form-check-label" for="acidoUrico"
                            >Ácido Úrico</label
                        ><br />

                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="triglicerideos"
                            name="triglicerideos"
                        />
                        <label class="form-check-label" for="triglicerideos"
                            >Triglicerídeos</label
                        ><br />

                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="ldlc"
                            name="ldlc"
                        />
                        <label class="form-check-label" for="ldlc">LDLC</label><br />

                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="hdlc"
                            name="hdlc"
                        />
                        <label class="form-check-label" for="hdlc">HDLC</label><br />

                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="colesterolTotal"
                            name="colesterolTotal"
                        />
                        <label class="form-check-label" for="colesterolTotal"
                            >Colesterol Total</label
                        ><br />

                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="colesterolNhdlc"
                            name="colesterolNhdlc"
                        />
                        <label class="form-check-label" for="colesterolNhdlc"
                            >Colesterol NHDLc</label
                        ><br />

                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="tgoast"
                            name="tgoast"
                        />
                        <label class="form-check-label" for="tgoast">TGOAST</label><br />

                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="calcio"
                            name="calcio"
                        />
                        <label class="form-check-label" for="calcio">Cálcio</label><br />

                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="tgpalt"
                            name="tgpalt"
                        />
                        <label class="form-check-label" for="tgpalt">TGPALT</label><br />

                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="bilirrubinaTotaleFracao"
                            name="bilirrubinaTotaleFracao"
                        />
                        <label class="form-check-label" for="bilirrubinaTotaleFracao"
                            >Bilirrubina Total e Fração</label
                        ><br />

                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="fosfataseAlcalina"
                            name="fosfataseAlcalina"
                        />
                        <label class="form-check-label" for="fosfataseAlcalina"
                            >Fosfatase Alcalina</label
                        ><br />

                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="ggt"
                            name="ggt"
                        />
                        <label class="form-check-label" for="ggt">GGT</label><br />

                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="transferrina"
                            name="transferrina"
                        />
                        <label class="form-check-label" for="transferrina"
                            >Transferrina</label
                        ><br />

                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="ferro"
                            name="ferro"
                        />
                        <label class="form-check-label" for="ferro">Ferro</label><br />

                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="ferritina"
                            name="ferritina"
                        />
                        <label class="form-check-label" for="ferritina">Ferritina</label
                        ><br />
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Solicitar Exame</button>
                    </form>
                </div>
            </div>
        </div>
    </div>


    <script>
    function setupModal(atendimentoId, pacienteId, medicoId) {
        $('#formSolicitarExame').data('atendimentoId', atendimentoId);
        $('#formSolicitarExame').data('pacienteId', pacienteId);
        $('#formSolicitarExame').data('medicoId', medicoId);

        // console.log('Setup modal:', { atendimentoId, pacienteId, medicoId });
    }

    $(document).ready(function () {
        $("#formSolicitarExame").on("submit", function (e) {
            e.preventDefault();

            var dadosExame = {
                atendimentoRef: {
                    AtendimentoId: $(this).data('atendimentoId'),
                    medicoId: $(this).data('medicoId'),
                    pacienteId: $(this).data('pacienteId'),
                }
            };

            $('#formSolicitarExame input[type="checkbox"]:checked').each(function () {
                dadosExame[this.name] = true;
            });

            // console.log('Dados sendo enviados:', JSON.stringify(dadosExame));

            $.ajax({
                url: "http://localhost:3001/solicitacaoExames",
                type: "POST",
                contentType: "application/json",
                data: JSON.stringify(dadosExame),
                success: function () {
                    $("#solicitarExameModal").modal("hide");
                    location.reload();
                },
                error: function (xhr) {
                    alert("Erro ao solicitar exame: " + xhr.responseText);
                },
            });
        });
    });
</script>